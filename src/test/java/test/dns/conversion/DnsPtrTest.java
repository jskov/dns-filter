package test.dns.conversion;

import static fixture.dns.wiredata.TestQueries.makeTestQuery;

import org.junit.jupiter.api.Test;

import dk.mada.dns.lookup.Query;
import static org.assertj.core.api.Assertions.assertThat;

class DnsPtrTest {
	/* Bad handling: Failed to convert request to model
	 * 0x0000 10 1f 01 00 00 01 00 00  00 00 00 00 01 32 01 30 .............2.0
	 * 0x0010 01 34 01 30 01 61 01 31  01 38 01 36 01 30 01 30 .4.0.a.1.8.6.0.0
	 * 0x0020 01 30 01 30 01 30 01 30  01 30 01 30 01 30 01 30 .0.0.0.0.0.0.0.0
	 * 0x0030 01 30 01 30 01 30 01 32  01 30 01 30 01 30 01 30 .0.0.0.2.0.0.0.0
	 * 0x0040 01 37 01 34 01 36 01 30  01 36 01 32 03 69 70 36 .7.4.6.0.6.2.ip6
	 * 0x0050 04 61 72 70 61 00 00 0c  00 01                   .arpa.....
	 */
	private static final byte[] REQUEST = new byte[] {0x10, 0x1f, 0x01, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x32, 0x01, 0x30, 0x01, 0x34, 0x01, 0x30, 0x01, 0x61, 0x01, 0x31, 0x01, 0x38, 0x01, 0x36, 0x01, 0x30, 0x01, 0x30, 0x01, 0x30, 0x01, 0x30, 0x01, 0x30, 0x01, 0x30, 0x01, 0x30, 0x01, 0x30, 0x01, 0x30, 0x01, 0x30, 0x01, 0x30, 0x01, 0x30, 0x01, 0x30, 0x01, 0x32, 0x01, 0x30, 0x01, 0x30, 0x01, 0x30, 0x01, 0x30, 0x01, 0x37, 0x01, 0x34, 0x01, 0x36, 0x01, 0x30, 0x01, 0x36, 0x01, 0x32, 0x03, 0x69, 0x70, 0x36, 0x04, 0x61, 0x72, 0x70, 0x61, 0x00, 0x00, 0x0c, 0x00, 0x01, };

	/**
	 * Just a simple test to see that request can be parsed.
	 * No further action implemented.
	 */
	@Test
	void doesNotExplodeOnTypeDecoding() {
		Query q = makeTestQuery(REQUEST);
		
		assertThat(q)
			.isNotNull();
	}
}
